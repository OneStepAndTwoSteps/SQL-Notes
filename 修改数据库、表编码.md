## 数据库编码修改

数据库的默认编码为latin。当我们在写中文字符集的时候会出现乱码，我们可以通过修改数据库默认编码方式为UTF8来减少数据库创建时的设置，也能最大限度的避免因粗心造成的乱码问题。  

### 我们可以通过命令查看数据库当前编码：
    
mysql> SHOW VARIABLES LIKE 'character%';

如：

    MariaDB [dongchen_test]> SHOW VARIABLES LIKE 'character%';
    +--------------------------+----------------------------+
    | Variable_name            | Value                      |
    +--------------------------+----------------------------+
    | character_set_client     | utf8                       |
    | character_set_connection | utf8                       |
    | character_set_database   | utf8                       |
    | character_set_filesystem | binary                     |
    | character_set_results    | utf8                       |
    | character_set_server     | latin1                     |
    | character_set_system     | utf8                       |
    | character_sets_dir       | /usr/share/mysql/charsets/ |
    +--------------------------+----------------------------+
    8 rows in set (0.00 sec)


### mysql与字符集


    量名                                   含义

    character_set_server            默认的内部操作字符集

    character_set_client            客户端来源数据使用的字符集

    character_set_connection            连接层字符集

    character_set_results           查询结果字符集

    character_set_database          当前选中数据库的默认字符集

    character_set_system            系统元数据(字段名等)字符集 


### 直接对全部字符集进行修改

    set character_set_database =utf8;

    set character_set_results =utf8;

    set character_set_server =utf8;

    set character_set_system =binary;

    SET collation_server = utf8_general_ci;
    
    SET collation_database = utf8_general_ci;





### 查看数据库和表使用的字符集 

__查看数据库编码__

    show create database <数据库名>;

__查看表使用的字符集__

    show create table <表名>;

__查看字段编码__

    show full columns from <表名>;


### 修改数据库和表使用的字符集  (注意：重启数据库后失效)

__修改数据库编码__

    alter database <数据库名> character set utf8;

__修改表使用的字符集__

    alter table <数据库名> character set utf8;


__修改字段编码__

    ALTER TABLE <表名> MODIFY COLUMN <字段名> <字段类型> CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
    
    show full columns from <表名>;


### 永久修改数据库编码


#### 编辑mysql的配置文件
vim /etc/my.cnf

#### 在[mysqld] 下面添加utf8配置
character_set_server = utf8

collation-server=utf8_general_ci


#### 重启服务
systemctl  restart mariadb 


#### MariaDB [(none)]> SHOW VARIABLES LIKE 'char%';

    +--------------------------+----------------------------+
    | Variable_name            | Value                      |
    +--------------------------+----------------------------+
    | character_set_client     | utf8                       |
    | character_set_connection | utf8                       |
    | character_set_database   | utf8                       |
    | character_set_filesystem | binary                     |
    | character_set_results    | utf8                       |
    | character_set_server     | utf8                       |
    | character_set_system     | utf8                       |
    | character_sets_dir       | /usr/share/mysql/charsets/ |
    +--------------------------+----------------------------+
    8 rows in set (0.00 sec)

